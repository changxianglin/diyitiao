<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>index04</title>
  </head>
  <body>
    <select class="" name="" id = 'colorSelect'>
      <option value="">请选择</option>
      <option value="red">红色</option>
      <option value="blue">蓝色</option>
    </select>

    <input type="text" name="" value="" id = 'numberInput'>
    <div class="" id = 'colorInfo'></div><br>
    <div class="" id = 'numberInfo'></div><br>
    <button type="button" name="button" id = 'nextBtn' disabled = 'true'>请选择手机颜色和购买数量</button>
<script type="text/javascript">
  var colorSelect = document.getElementById('colorSelect')
  var numberInput = document.getElementById('numberInput')
  var colorInfo = document.getElementById('colorInfo')
  var numberInfo = document.getElementById('numberInfo')
  var nextBtn = document.getElementById('nextBtn')

  var goods = {
    'red': 3,
    'blue': 6
  }

  colorSelect.onchange = function() {
    var color = this.value
    var number = numberInput.value
    var stock = goods[color]

    colorInfo.innerHTML = color

    if(!color) {
      nextBtn.disabled = true
      nextBtn.innerHTML = '请选择手机颜色'
      return
    }

    if(Number.isInteger(number - 0) && number > 0) {
      nextBtn.disabled = true
      nextBtn.innerHTML = '请输入正确的购买数量'
      return
    }

    if(number > stock) {
      nextBtn.disabled = true
      nextBtn.innerHTML = '库存不足'
      return
    }

    nextBtn.disabled = false
    nextBtn.innerHTML = '请放入购物车'
  }

  numberInput.oninput = function() {
    var color = colorSelect.value
    var number = this.value
    var stock = goods[color]

    numberInfo.innerHTML = number

    if(!color) {
      nextBtn.disabled = true
      nextBtn.innerHTML = '请选择手机颜色'
      return
    }

    if(((number - 0) | 0) !== number - 0) {
      nextBtn.disabled = true
      nextBtn.innerHTML = '请输入正确的购买数量'
      return
    }

    if(number > stock) {
      nextBtn.disabled = true
      nextBtn.innerHTML = '库存不足'
      return
    }

    nextBtn.disabled = false
    nextBtn.innerHTML = '放入购物车'
  }
</script>
  </body>
</html>
